!function(t){function e(t){t.elem.style[t.prop]=parseInt(t.now,10)+t.unit}var o=function(){return!1},r={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},n=function(t){return t&&-1==t.indexOf("#")&&-1==t.indexOf("(")?"rgb("+r[t].toString()+")":t};t.extend(t.fx.step,{borderTopWidth:e,borderBottomWidth:e,borderLeftWidth:e,borderRightWidth:e}),t.fn.revertFlip=function(){return this.each(function(){var e=t(this);e.flip(e.data("flipRevertedSettings"))})},t.fn.flip=function(e){return this.each(function(){var r,i,a,d,l,s=t(this),h=o();if(s.data("flipLock"))return!1;var u={direction:function(t){switch(t){case"tb":return"bt";case"bt":return"tb";case"lr":return"rl";case"rl":return"lr";default:return"bt"}}(e.direction),bgColor:n(e.color)||"#999",color:n(e.bgColor)||s.css("background-color"),content:s.html(),speed:e.speed||500,onBefore:e.onBefore||function(){},onEnd:e.onEnd||function(){},onAnimation:e.onAnimation||function(){},dontChangeColor:e.dontChangeColor||!1};s.data("flipRevertedSettings",u).data("flipLock",1).data("flipSettings",u),r={width:s.width(),height:s.height(),bgColor:n(e.bgColor)||s.css("background-color"),fontSize:s.css("font-size")||"12px",direction:e.direction||"tb",toColor:n(e.color)||"#999",speed:e.speed||500,top:s.offset().top,left:s.offset().left,target:e.content||null,transparent:"transparent",dontChangeColor:e.dontChangeColor||!1,onBefore:e.onBefore||function(){},onEnd:e.onEnd||function(){},onAnimation:e.onAnimation||function(){}},h&&(r.transparent="#123456"),i=s.css("visibility","hidden").clone(!0).data("flipLock",1).appendTo("body").html("").css({visibility:"visible",position:"absolute",left:r.left,top:r.top,margin:0,zIndex:9999,"-webkit-box-shadow":"0px 0px 0px #000","-moz-box-shadow":"0px 0px 0px #000"});var c=function(){return{backgroundColor:r.transparent,fontSize:0,lineHeight:0,borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,borderTopColor:r.transparent,borderBottomColor:r.transparent,borderLeftColor:r.transparent,borderRightColor:r.transparent,background:"none",borderStyle:"solid",height:0,width:0}},f=function(){var t=r.height/100*25,e=c();return e.width=r.width,{start:e,first:{borderTopWidth:0,borderLeftWidth:t,borderRightWidth:t,borderBottomWidth:0,borderTopColor:"#999",borderBottomColor:"#999",top:r.top+r.height/2,left:r.left-t},second:{borderBottomWidth:0,borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopColor:r.transparent,borderBottomColor:r.transparent,top:r.top,left:r.left}}},b=function(){var t=r.height/100*25,e=c();return e.height=r.height,{start:e,first:{borderTopWidth:t,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:t,borderLeftColor:"#999",borderRightColor:"#999",top:r.top-t,left:r.left+r.width/2},second:{borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftColor:r.transparent,borderRightColor:r.transparent,top:r.top,left:r.left}}};d={tb:function(){var t=f();return t.start.borderTopWidth=r.height,t.start.borderTopColor=r.bgColor,t.second.borderBottomWidth=r.height,t.second.borderBottomColor=r.toColor,t},bt:function(){var t=f();return t.start.borderBottomWidth=r.height,t.start.borderBottomColor=r.bgColor,t.second.borderTopWidth=r.height,t.second.borderTopColor=r.toColor,t},lr:function(){var t=b();return t.start.borderLeftWidth=r.width,t.start.borderLeftColor=r.bgColor,t.second.borderRightWidth=r.width,t.second.borderRightColor=r.toColor,t},rl:function(){var t=b();return t.start.borderRightWidth=r.width,t.start.borderRightColor=r.bgColor,t.second.borderLeftWidth=r.width,t.second.borderLeftColor=r.toColor,t}},a=d[r.direction](),h&&(a.start.filter="chroma(color="+r.transparent+")"),l=function(){var t=r.target;return t&&t.jquery?t.html():t},i.queue(function(){r.onBefore(i,s),i.html("").css(a.start),i.dequeue()}),i.animate(a.first,r.speed),i.queue(function(){r.onAnimation(i,s),i.dequeue()}),i.animate(a.second,r.speed),i.queue(function(){r.dontChangeColor||s.css({backgroundColor:r.toColor}),s.css({visibility:"visible"});var t=l();t&&s.html(t),i.remove(),r.onEnd(i,s),s.removeData("flipLock"),i.dequeue()})})}}(jQuery);var Shortener=React.createClass({displayName:"Shortener",getInitialState:function(){return{data:{url:null,id:null,host:null}}},handleSubmit:function(t){t.preventDefault();var e=this.refs.url.getDOMNode().value.trim();$.ajax({type:"POST",data:{url:e},success:function(t){if(t.error)$(this.refs.notification.getDOMNode()).text(t.error);else{var e=this;$(e.getDOMNode()).flip({speed:250,dontChangeColor:!0,onBefore:function(){e.setState({data:t.data});var o=e.state.data.host+"/"+e.state.data.id;e.refs.url.getDOMNode().value=o},onEnd:function(){$(e.refs.url.getDOMNode()).focus(),$(e.refs.url.getDOMNode()).select()}})}}.bind(this)})},handleRevert:function(t){t.preventDefault();var e=this;$(this.getDOMNode()).flip({speed:250,dontChangeColor:!0,onBefore:function(){e.setState(e.getInitialState()),e.refs.url.getDOMNode().value=""}})},render:function(){return this.state.data&&this.state.data.id?React.DOM.form({action:"/",method:"POST",className:"shortener shortened",onSubmit:this.handleRevert},React.DOM.input({ref:"url",className:"shortener__url--output",type:"text",disabled:!0}),React.DOM.input({type:"submit",className:"shortener__button--revert",value:"New"}),React.DOM.span({ref:"notification",className:"shortener__notification"},"Hit Ctrl/Cmd-C to copy to clipboard.")):React.DOM.form({action:"/",method:"POST",className:"shortener",onSubmit:this.handleSubmit},React.DOM.input({type:"text",ref:"url",name:"url",placeholder:"Enter a URL to shorten...",className:"shortener__url--input"}),React.DOM.input({type:"submit",className:"shortener__button--submit",value:"Go!"}),React.DOM.span({ref:"notification",className:"shortener__notification error"}))}});React.renderComponent(Shortener(null),document.getElementById("app"));